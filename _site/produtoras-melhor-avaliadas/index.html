<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Produtoras melhor avaliadas &middot; Projeto - Visualização de Dados
    
  </title>

  
  <link rel="canonical" href="/https://felipelrib.github.io/ProjetoVD/produtoras-melhor-avaliadas/">
  

  <link rel="stylesheet" href="/https://felipelrib.github.io/ProjetoVD/public/css/poole.css">
  <link rel="stylesheet" href="/https://felipelrib.github.io/ProjetoVD/public/css/syntax.css">
  <link rel="stylesheet" href="/https://felipelrib.github.io/ProjetoVD/public/css/lanyon.css">
  <link rel="stylesheet" href="/https://felipelrib.github.io/ProjetoVD/public/css/project.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/https://felipelrib.github.io/ProjetoVD/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/https://felipelrib.github.io/ProjetoVD/public/favicon.ico">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="/https://felipelrib.github.io/ProjetoVD/atom.xml">

  
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>Página para o projeto final da disciplina de Visualização de Dados</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/https://felipelrib.github.io/ProjetoVD/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
    
      
        
          <a class="sidebar-nav-item" href="/https://felipelrib.github.io/ProjetoVD/dia-lancamento-filme/">Data de lançamento de um filme</a>
        
      
    
      
        
          <a class="sidebar-nav-item active" href="/https://felipelrib.github.io/ProjetoVD/produtoras-melhor-avaliadas/">Produtoras melhor avaliadas</a>
        
      
    
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2021. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="https://felipelrib.github.io/ProjetoVD/" title="Home">Projeto - Visualização de Dados</a>
            <small></small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <script src="https://code.highcharts.com/highcharts.js"></script>
<script type="text/javascript">
  window.filters = {};

  function loadMoviesData() {
    return new Promise((resolve, reject) => {
      const pageContentElement = document.getElementById("page-content");
      const loadingContainerElement = document.getElementById("loading-container");
      const pageContentPreviousDisplay = pageContentElement.style.display
      const loadingContainerPreviousDisplay = loadingContainerElement.style.display
      pageContentElement.style.display = "none";
      loadingContainerElement.style.display = loadingContainerPreviousDisplay;
      fetch("https://dl.dropbox.com/s/7y9nhd8nwzl96or/movies_metadata.json").then(response => response.json()).then(data => {
        pageContentElement.style.display = pageContentPreviousDisplay;
        loadingContainerElement.style.display = "none";
        window.moviesData = data;
        resolve();
      });
    });
  }

  function addListener(inputName, callback) {
    input = document.querySelector(`input[name=${inputName}]`);
    timeoutEvent = null;
    input.addEventListener('change', event => {
      if (timeoutEvent) {
        clearTimeout(timeoutEvent);
      }
      timeoutEvent = setTimeout(_ => {
        if (!event.target.value) {
          delete window.filters[inputName];
        } else {
          if (input.type === "number") {
            window.filters[inputName] = parseFloat(event.target.value);
          } else {
            window.filters[inputName] = event.target.value;
          }
        }
        timeoutEvent = null;
        callback();
      }, 250);
    });
  }
</script>
<div class="page">
  <h1 class="page-title">Produtoras melhor avaliadas</h1>
  <div id="loading-container">
    <div class="loader"></div>
    <div>Carregando visualização. Por favor, aguarde...</div>
  </div>
  <div id="page-content">
    <script type="text/javascript">
    function updateGraph() {
        if (!window.moviesByProductionCompany) {
            window.moviesByProductionCompany = {};
            moviesData.forEach(movie => {
                if (Array.isArray(movie.production_companies) && movie.vote_average) {
                    movie.production_companies.forEach(productionCompany => {
                        if (productionCompany.name) {
                            if (!moviesByProductionCompany[productionCompany.name]) {
                                moviesByProductionCompany[productionCompany.name] = [];
                            }
                            moviesByProductionCompany[productionCompany.name].push(movie);
                        }
                    });
                }
            });
            window.averageRatingByProductionCompany = {};
            for (const companyName in moviesByProductionCompany) {
                const ratingSum = moviesByProductionCompany[companyName].reduce((sum, movie) => {
                    return sum + movie.vote_average;
                }, 0);
                averageRatingByProductionCompany[companyName] = ratingSum / moviesByProductionCompany[companyName].length;
            }
        }
        chartData = [];
        for (const companyName in moviesByProductionCompany) {
            if (moviesByProductionCompany[companyName].length >= (filters.minimumMoviesAmount || 100)) {
                chartData.push([companyName, averageRatingByProductionCompany[companyName]]);
            }
        }

        chartData.sort((a, b) => b[1] - a[1]);
        chartData = chartData.slice(0, filters.resultsAmount || 10);

        Highcharts.chart('container', {
            chart: {
                type: 'column'
            },
            title: {
                text: 'Produtoras melhor avaliadas'
            },
            xAxis: {
                type: 'category',
                labels: {
                    style: {
                        fontSize: '13px',
                        fontFamily: 'Verdana, sans-serif'
                    }
                }
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Nota média dos filmes'
                }
            },
            legend: {
                enabled: false
            },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.y:.2f}</b>'
            },
            credits: {
                enabled: false
            },
            series: [{
                name: 'Nota média dos filmes',
                data: chartData,
                dataLabels: {
                    enabled: true,
                    rotation: -90,
                    color: '#FFFFFF',
                    align: 'right',
                    format: '{point.y:.2f}',
                    y: 10,
                    style: {
                        fontSize: '13px',
                        fontFamily: 'Verdana, sans-serif'
                    }
                }
            }]
        });
    }

    function validateInputChange() {
        function reportError(inputName, errorMessage) {
            let input = document.querySelector(`input[name=${inputName}]`);
            input.setCustomValidity(errorMessage);
            input.reportValidity();
        }

        if (filters.minimumMoviesAmount && isNaN(filters.minimumMoviesAmount)) {
            reportError("minimumMoviesAmount", "Por favor, insira um número válido.");
        } else if (filters.resultsAmount && isNaN(filters.resultsAmount)) {
            reportError("resultsAmount", "Por favor, insira um número válido.");
        } else {
            updateGraph();
        }
    }

    loadMoviesData().then(_ => {
        updateGraph();
        addListener("minimumMoviesAmount", validateInputChange);
        addListener("resultsAmount", validateInputChange);
    });
</script>

<p class="message">
A quantidade mínima de filmes deve ser definida para evitar outliers de produtoras que tenham poucos filmes bem-avaliados. A quantidade mínima de filmes para uma produtora ser considerada pode ser alterada no filtro abaixo.
</p>
<p><label for="minimumMoviesAmount">Quantidade mínima de filmes da produtora:</label>
<input type="number" id="minimumMoviesAmount" name="minimumMoviesAmount" value="100" />
<br />
<label for="resultsAmount">Quantidade de produtoras a serem exibidas no gráfico:</label>
<input type="number" id="resultsAmount" name="resultsAmount" value="10" /></p>
<div id="container"></div>
<p class="message">
Todas elas são produtoras bastante conhecidas, sendo a Toho com a maior média. É uma produtora oriental que pode não ser bem conhecida à primeira vista, mas foi responsável por diversos filmes do gênero de animes e de filmes clássicos como o Godzilla. Além disso, há a presença da francesa France 2 Cinéma, mais focada em filmes “cult”.
</p>

  </div>
</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script src='https://felipelrib.github.io/ProjetoVD/public/js/script.js'></script>
  </body>
</html>
